#macro( Label $label )
#set( $textToggler = "{" )
#if( "$!label.properties.textIfHigh" != "" )
#set( $textToggler = $textToggler + """1"":""${label.properties.textIfHigh}""," )
#end
#if( "$!label.properties.textIfLow" != "" )
#set( $textToggler = $textToggler + """0"":""${label.properties.textIfLow}""," )
#end
#if( $textToggler.length() > 1 )
#set ( $len = $textToggler.length() )
#set ( $len = $len - 1 )
#set ($textToggler = $textToggler.substring(0, $len) )
#end
#set( $textToggler = $textToggler + "}" )
#set( $classToggler = "{" )
#if( "$!label.properties.classIfHigh" != "" )
#set( $classToggler = $classToggler + """1"":""${label.properties.classIfHigh}""," )
#end
#if( "$!label.properties.classIfLow" != "" )
#set( $classToggler = $classToggler + """0"":""${label.properties.classIfLow}""," )
#end
#if( $classToggler.length() > 1 )
#set ( $len = $classToggler.length() )
#set ( $len = $len - 1)
#set ($classToggler = $classToggler.substring(0, $len) )
#end
#set( $classToggler = $classToggler + "}" )
<div#printId($label)#printClass($label)>
	$label.properties.text.replaceAll("\{\{(.*?)\}\}", "<span bindToProperty=""$1"" textToggler='$textToggler'></span>").replaceFirst("<span", "<span classToggler='$classToggler'")
</div>
#end