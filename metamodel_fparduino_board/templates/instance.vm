################################
## Instance
################################

#macro( instance_decl )
${NodeTemplateUtils.stripDynamicPrefix(${node.type})} ${node.properties.name};
#end

#macro( instance_init )
#instance_create()
#instance_addComponent()
#end

#macro( instance_create $params )
#if( !$params )
#set( $params = "" )
#end
${node.properties.name} = new ${NodeTemplateUtils.stripDynamicPrefix(${node.type})}(${params});
#end

#macro( instance_addComponent )
addComponent(${node.properties.name});
#end

#macro( instance_handlers $node )
#set( $instance = $node )
#foreach( $child in $NodeTemplateUtils.getChildren($node.nodeUri) )
#callMacroWithSuffix( $child "_handler" )
#end
#end

#macro( instance_addListeners $node )
#set( $instance = $node )
#foreach( $child in $NodeTemplateUtils.getChildren($node.nodeUri) )
#callMacroWithSuffix( $child "_addListener" )
#end
#end
